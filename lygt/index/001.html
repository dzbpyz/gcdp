<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>质保书详情</title>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "PingFang SC", "Microsoft YaHei", sans-serif;
            background-color: #f0f2f5;
            color: #333;
            font-size: 16px; /* 基准字体大小 */
        }

        /* --- START: Splash Screen CSS --- */
        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #f0f2f5; /* 与 body 背景色一致 */
            display: flex;
            align-items: flex-start;  /* 内容顶部对齐 */
            justify-content: center; /* 包裹容器水平居中 */
            z-index: 9999;
            overflow-y: auto; /* 如果图片过高，允许在闪屏内部滚动 */
            padding-top: 20px; /* 可选: 给图片顶部一些留白, 如果不要则设为0或移除 */
        }

        #splash-content-wrapper {
            width: 100%;
            max-width: 750px; /* 与 .container 的 max-width 保持一致 */
            /* margin: 0 auto; 被 #splash-screen 的 justify-content: center; 处理 */
        }

        #splash-image {
            display: block; /* 确保图片是块级元素，避免底部多余空间 */
            width: 100%;     /* 宽度占满其父容器 #splash-content-wrapper */
            height: auto;    /* 高度自动，等比例缩放 */
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); /* 可选: 保留阴影 */
        }
        /* --- END: Splash Screen CSS --- */

        .container {
            max-width: 750px;
            margin: 0 auto;
            background-color: #ffffff;
            /* 初始隐藏 */
            display: none;
        }

        .warranty-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #e8e8e8;
            cursor: pointer;
        }

        .warranty-info .id {
            font-weight: bold;
            font-size: 1.1em; /* 桌面端大小 */
            margin-bottom: 5px;
            color: #1f1f1f;
        }

        .warranty-info .date {
            font-size: 0.9em; /* 桌面端大小 */
            color: #595959;
        }

        .dropdown-arrow {
            --arrow-color: #8c8c8c;
            --arrow-rotation: 0deg;
            --arrow-font-size: 1.7em;
            --arrow-font-weight: normal;
            font-size: var(--arrow-font-size);
        }

        .arrow-char {
            display: inline-block;
            color: var(--arrow-color);
            transform: rotate(var(--arrow-rotation));
            font-weight: var(--arrow-font-weight);
            transition: transform 0.2s ease-in-out, color 0.2s ease-in-out, font-size 0.2s ease-in-out, font-weight 0.2s ease-in-out;
        }

        .warranty-item.active .dropdown-arrow {
             --arrow-color: #007bff;
             --arrow-rotation: 180deg;
             --arrow-font-size: 1.4em;
             --arrow-font-weight: bold;
        }

        .warranty-details {
            display: none;
            padding: 10px 15px 20px 15px; /* Default padding */
            border-bottom: 1px solid #e8e8e8;
            background-color: #fdfdfd;
            font-size: 0.9em;
        }

        .warranty-details.expanded {
            display: block;
        }

        /* CSS for the full-width image area */
        .full-width-image-area {
            padding: 5px 0; /* 5px padding top/bottom, 0 padding left/right. Adjust 5px as needed. */
        }

        .warranty-details > p {
            margin: 4px 0;
            line-height: 1.3;
            color: #333;
        }

        .section-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-top: 20px;
            margin-bottom: 24px;
            color: #1f1f1f;
        }
        .warranty-details > p + .section-title {
             margin-top: 15px;
        }
        .warranty-details > .section-title:first-child {
            margin-top: 0;
        }


        .title-divider {
            border: 0;
            height: 1px;
            background-color: #e0e0e0;
            margin-top: 0px;
            margin-bottom: 1px;
        }

        .details-list {
            margin-bottom: 15px;
        }

        .detail-entry {
            display: grid;
            grid-template-columns: 3fr 2fr 2fr;
            gap: 8px;
            padding: 3px 0;
            align-items: center;
            line-height: 1.2;
        }

       .entry-value {
            text-align: left;
        }
        .entry-status {
            text-align: center;
        }

        .detail-entry span {
            display: block;
        }

        .entry-label {
            text-align: left;
            word-break: break-word;
        }


        .detail-header .entry-label,
        .detail-header .entry-value,
        .detail-header .entry-status {
            font-weight: bold;
            color: #595959;
        }

        .certificate-image-container {
            padding: 10px 0;
        }

        .full-width-image-area .certificate-image-container {
            padding: 0;
        }

        .certificate-image-container img {
            display: block;
            width: 100%;
            height: auto;
            cursor: pointer;
        }

        .contact-section {
            padding: 20px 15px;
            background-color: #ffffff;
            /* 初始隐藏 */
            display: none;
        }

        .contact-section .title {
            font-size: 1.0em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #1f1f1f;
        }

        .contact-section p {
            margin: 8px 0;
            line-height: 1.6;
            font-size: 0.90em;
            color: #333;
        }

        /* 灯箱样式 */
        .lightbox-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000000;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .lightbox-overlay.is-scrollable {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            justify-content: flex-start;
        }

        .lightbox-overlay img {
            display: block;
            width: 100vh;
            height: auto;
            max-width: 95vw;
            max-height: 95vh;
            margin: auto;
            box-shadow: none;
            cursor: pointer;
            transition: width 0.3s ease-in-out, height 0.3s ease-in-out, max-width 0.3s ease-in-out, max-height 0.3s ease-in-out;
            object-fit: contain;
            flex-shrink: 0;
        }

        .lightbox-overlay img.lightbox-image-zoomed {
            height: 100vh;
            width: auto;
            max-width: none;
            box-shadow: none;
            flex-shrink: 0;
            margin: 0;
        }

        /* --- 媒体查询：针对手机屏幕 --- */
        @media (max-width: 767px) {
            .warranty-info .id {
                font-size: 0.9em;
            }

            .warranty-info .date {
                font-size: 0.85em;
            }
            /* 如果需要在手机上调整闪屏图片的顶部留白 */
            /*
            #splash-screen {
                padding-top: 10px;
            }
            */
        }
        /* --- 媒体查询结束 --- */

    </style>
</head>
<body>
    <!-- START: Splash Screen HTML -->
    <div id="splash-screen">
        <div id="splash-content-wrapper">
            <img id="splash-image" src="" alt="正在加载证书...">
        </div>
    </div>
    <!-- END: Splash Screen HTML -->

    <div class="container">
             <!-- 质保书条目 1 (数据源模板) -->
        <div class="warranty-item active" data-source-item-template>
            <div class="warranty-info">
                <div class="id" data-source-field="idText">质保书号:M02504080033</div>
                <div class="date" data-source-field="dateText">签发日期: 2025-04-08</div>
            </div>
            <div class="dropdown-arrow">
                <span class="arrow-char">∨</span>
            </div>
        </div>
        <div class="warranty-details expanded" data-source-details-template>
            <p data-source-p="manufacturer">生产厂家: 凌源钢铁股份有限公司</p>
            <p data-source-p="productName">产品名称: 热轧带肋钢筋 (直条)</p>
            <p data-source-p="productionDate">生产日期: 2025-04-08</p>
            <p data-source-p="furnaceNo">炉号: 25702918</p>
            <p data-source-p="steelGrade">钢种: 热轧带肋钢筋 (直条)</p>
            <p data-source-p="specification">规格: Φ22</p>
            <p data-source-p="weight">重量: 2.86100t</p>
            <p data-source-p="bundleNo">捆号 (卷号):B2254529801900</p>

            <div class="section-title">成分信息</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">成分</span>
                    <span class="entry-value">结果, %</span>
                    <span class="entry-status">判定</span>
                </div>
                <div class="detail-entry" data-source-component="C">
                    <span class="entry-label">C (10 <sup>-2</sup>)</span>
                    <span class="entry-value" data-source-value>24</span>
                    <span class="entry-status" data-source-status>合格</span>
                </div>
                <div class="detail-entry" data-source-component="Si">
                    <span class="entry-label">Si (10 <sup>-2</sup>)</span>
                    <span class="entry-value" data-source-value>25</span>
                    <span class="entry-status" data-source-status>合格</span>
                </div>
                <div class="detail-entry" data-source-component="Mn">
                    <span class="entry-label">Mn (10 <sup>-2</sup>)</span>
                    <span class="entry-value" data-source-value>139</span>
                    <span class="entry-status" data-source-status>合格</span>
                </div>
                <div class="detail-entry" data-source-component="P">
                    <span class="entry-label">P (10 <sup>-3</sup>)</span>
                    <span class="entry-value" data-source-value>29</span>
                    <span class="entry-status" data-source-status>合格</span>
                </div>
                <div class="detail-entry" data-source-component="S">
                    <span class="entry-label">S (10 <sup>-3</sup>)</span>
                    <span class="entry-value" data-source-value>26</span>
                    <span class="entry-status" data-source-status>合格</span>
                </div>
                <div class="detail-entry" data-source-component="Ceq">
                    <span class="entry-label">Ceq (10 <sup>-2</sup>)</span>
                    <span class="entry-value" data-source-value>49</span>
                    <span class="entry-status" data-source-status>合格</span>
                </div>
            </div>

            <div class="section-title">物理特性</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">项目</span>
                    <span class="entry-value">结果</span>
                    <span class="entry-status">判定</span>
                </div>
                <div class="detail-entry" data-source-property="actualThickness">
                    <span class="entry-label">材料实际厚度</span>
                    <span class="entry-value" data-source-value>22</span>
                    <span class="entry-status" data-source-status>合格</span>
                </div>
                <div class="detail-entry" data-source-property="gaugeCode">
                    <span class="entry-label">标距代码</span>
                    <span class="entry-value" data-source-value>14</span>
                    <span class="entry-status" data-source-status>合格</span>
                </div>
                <div class="detail-entry" data-source-property="yieldStrength">
                    <span class="entry-label">屈服强度</span>
                    <span class="entry-value" data-source-value>445.0</span>
                    <span class="entry-status" data-source-status>合格</span>
                </div>
                <div class="detail-entry" data-source-property="tensileStrength">
                    <span class="entry-label">抗拉强度</span>
                    <span class="entry-value" data-source-value>630.0</span>
                    <span class="entry-status" data-source-status>合格</span>
                </div>
                <div class="detail-entry" data-source-property="yieldRatio">
                    <span class="entry-label">屈强比</span>
                    <span class="entry-value" data-source-value>-1.000</span>
                    <span class="entry-status" data-source-status>合格</span>
                </div>
                <div class="detail-entry" data-source-property="bendingAngle">
                    <span class="entry-label">弯曲角度</span>
                    <span class="entry-value" data-source-value>90</span>
                    <span class="entry-status" data-source-status>合格</span>
                </div>
                <div class="detail-entry" data-source-property="bendingDiameter">
                    <span class="entry-label">弯曲直径</span>
                    <span class="entry-value" data-source-value>4d</span>
                    <span class="entry-status" data-source-status>合格</span>
                </div>
                <div class="detail-entry" data-source-property="tensileDirection">
                    <span class="entry-label">拉伸试验方向</span>
                    <span class="entry-value" data-source-value>纵向</span>
                    <span class="entry-status" data-source-status>合格</span>
                </div>
            </div>
        </div>

        <!-- 质保书条目 2 -->
        <div class="warranty-item" data-target-item>
            <div class="warranty-info">
                <div class="id" data-target-field="idText"></div>
                <div class="date" data-target-field="dateText"></div>
            </div>
            <div class="dropdown-arrow">
                <span class="arrow-char">∨</span>
            </div>
        </div>
       <div class="warranty-details" data-target-details>
            <p>生产厂家: <span data-target-value-for-p="manufacturer"></span></p>
            <p>产品名称: <span data-target-value-for-p="productName"></span></p>
            <p>生产日期: <span data-target-value-for-p="productionDate"></span></p>
            <p>炉号: <span data-target-value-for-p="furnaceNo"></span></p>
            <p>钢种: <span data-target-value-for-p="steelGrade"></span></p>
            <p>规格: <span data-target-value-for-p="specification"></span></p>
            <p>重量: <span data-target-value-for-p="weight"></span></p>
            <p>捆号 (卷号): <span data-target-value-for-p="bundleNo"></span></p>

            <div class="section-title">成分信息</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">成分</span>
                    <span class="entry-value">结果, %</span>
                    <span class="entry-status">判定</span>
                </div>
            </div>

            <div class="section-title">物理特性</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">项目</span>
                    <span class="entry-value">结果</span>
                    <span class="entry-status">判定</span>
                </div>
                <div class="detail-entry" data-target-property="gaugeCode">
                    <span class="entry-label">标距代码</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingAngle">
                    <span class="entry-label">弯曲角度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingDiameter">
                    <span class="entry-label">弯曲直径</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="tensileDirection">
                    <span class="entry-label">拉伸试验方向</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
            </div>
        </div>


        <!-- 质保书条目 3 -->
        <div class="warranty-item" data-target-item>
            <div class="warranty-info">
                <div class="id" data-target-field="idText"></div>
                <div class="date" data-target-field="dateText"></div>
            </div>
            <div class="dropdown-arrow">
                <span class="arrow-char">∨</span>
            </div>
        </div>
        <div class="warranty-details" data-target-details>
            <p>生产厂家: <span data-target-value-for-p="manufacturer"></span></p>
            <p>产品名称: <span data-target-value-for-p="productName"></span></p>
            <p>生产日期: <span data-target-value-for-p="productionDate"></span></p>
            <p>炉号: <span data-target-value-for-p="furnaceNo"></span></p>
            <p>钢种: <span data-target-value-for-p="steelGrade"></span></p>
            <p>规格: <span data-target-value-for-p="specification"></span></p>
            <p>重量: <span data-target-value-for-p="weight"></span></p>
            <p>捆号 (卷号): <span data-target-value-for-p="bundleNo"></span></p>

            <div class="section-title">成分信息</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">成分</span>
                    <span class="entry-value">结果, %</span>
                    <span class="entry-status">判定</span>
                </div>
            </div>

            <div class="section-title">物理特性</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">项目</span>
                    <span class="entry-value">结果</span>
                    <span class="entry-status">判定</span>
                </div>
                <div class="detail-entry" data-target-property="gaugeCode">
                    <span class="entry-label">标距代码</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="yieldStrength">
                    <span class="entry-label">屈服强度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="tensileStrength">
                    <span class="entry-label">抗拉强度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="yieldRatio">
                    <span class="entry-label">屈强比</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingAngle">
                    <span class="entry-label">弯曲角度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingDiameter">
                    <span class="entry-label">弯曲直径</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="tensileDirection">
                    <span class="entry-label">拉伸试验方向</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
            </div>
        </div>

		<!-- 质保书条目 4 -->
        <div class="warranty-item" data-target-item>
            <div class="warranty-info">
                <div class="id" data-target-field="idText"></div>
                <div class="date" data-target-field="dateText"></div>
            </div>
            <div class="dropdown-arrow">
                <span class="arrow-char">∨</span>
            </div>
        </div>
        <div class="warranty-details" data-target-details>
            <p>生产厂家: <span data-target-value-for-p="manufacturer"></span></p>
            <p>产品名称: <span data-target-value-for-p="productName"></span></p>
            <p>生产日期: <span data-target-value-for-p="productionDate"></span></p>
            <p>炉号: <span data-target-value-for-p="furnaceNo"></span></p>
            <p>钢种: <span data-target-value-for-p="steelGrade"></span></p>
            <p>规格: <span data-target-value-for-p="specification"></span></p>
            <p>重量: <span data-target-value-for-p="weight"></span></p>
            <p>捆号 (卷号): <span data-target-value-for-p="bundleNo"></span></p>

            <div class="section-title">成分信息</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">成分</span>
                    <span class="entry-value">结果, %</span>
                    <span class="entry-status">判定</span>
                </div>
            </div>

            <div class="section-title">物理特性</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">项目</span>
                    <span class="entry-value">结果</span>
                    <span class="entry-status">判定</span>
                </div>
                <div class="detail-entry" data-target-property="gaugeCode">
                    <span class="entry-label">标距代码</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingAngle">
                    <span class="entry-label">弯曲角度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingDiameter">
                    <span class="entry-label">弯曲直径</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="tensileDirection">
                    <span class="entry-label">拉伸试验方向</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
            </div>
        </div>
		<!-- 质保书条目 5 -->
        <div class="warranty-item" data-target-item>
            <div class="warranty-info">
                <div class="id" data-target-field="idText"></div>

                <div class="date" data-target-field="dateText"></div>
            </div>
            <div class="dropdown-arrow">
                <span class="arrow-char">∨</span>
            </div>
        </div>
        <div class="warranty-details" data-target-details>
            <p>生产厂家: <span data-target-value-for-p="manufacturer"></span></p>
            <p>产品名称: <span data-target-value-for-p="productName"></span></p>
            <p>生产日期: <span data-target-value-for-p="productionDate"></span></p>
            <p>炉号: <span data-target-value-for-p="furnaceNo"></span></p>
            <p>钢种: <span data-target-value-for-p="steelGrade"></span></p>
            <p>规格: <span data-target-value-for-p="specification"></span></p>
            <p>重量: <span data-target-value-for-p="weight"></span></p>
            <p>捆号 (卷号): <span data-target-value-for-p="bundleNo"></span></p>

            <div class="section-title">成分信息</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">成分</span>
                    <span class="entry-value">结果, %</span>
                    <span class="entry-status">判定</span>
                </div>
            </div>

            <div class="section-title">物理特性</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">项目</span>
                    <span class="entry-value">结果</span>
                    <span class="entry-status">判定</span>
                </div>
                <div class="detail-entry" data-target-property="gaugeCode">
                    <span class="entry-label">标距代码</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingAngle">
                    <span class="entry-label">弯曲角度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingDiameter">
                    <span class="entry-label">弯曲直径</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="tensileDirection">
                    <span class="entry-label">拉伸试验方向</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
            </div>
        </div>

		<!-- 质保书条目 6 -->
		<div class="warranty-item" data-target-item>
            <div class="warranty-info">
                <div class="id" data-target-field="idText"></div>
                <div class="date" data-target-field="dateText"></div>
            </div>
            <div class="dropdown-arrow">
                <span class="arrow-char">∨</span>
            </div>
        </div>
        <div class="warranty-details" data-target-details data-item-index="6">
            <p>生产厂家: <span data-target-value-for-p="manufacturer"></span></p>
            <p>产品名称: <span data-target-value-for-p="productName"></span></p>
            <p>生产日期: <span data-target-value-for-p="productionDate"></span></p>
            <p>炉号: <span data-target-value-for-p="furnaceNo"></span></p>
            <p>钢种: <span data-target-value-for-p="steelGrade"></span></p>
            <p>规格: <span data-target-value-for-p="specification"></span></p>
            <p>重量: <span data-target-value-for-p="weight"></span></p>
            <p>捆号 (卷号): <span data-target-value-for-p="bundleNo"></span></p>

            <div class="section-title">成分信息</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">成分</span>
                    <span class="entry-value">结果, %</span>
                    <span class="entry-status">判定</span>
                </div>
                <div class="detail-entry" data-target-component="C">
                    <span class="entry-label">C (10 <sup>-2</sup>)</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-component="Si">
                    <span class="entry-label">Si (10 <sup>-2</sup>)</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-component="Mn">
                    <span class="entry-label">Mn (10 <sup>-2</sup>)</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-component="P">
                    <span class="entry-label">P (10 <sup>-3</sup>)</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-component="S">
                    <span class="entry-label">S (10 <sup>-3</sup>)</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-component="Ceq">
                    <span class="entry-label">Ceq (10 <sup>-2</sup>)</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
            </div>

            <div class="section-title">物理特性</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">项目</span>
                    <span class="entry-value">结果</span>
                    <span class="entry-status">判定</span>
                </div>
                <div class="detail-entry" data-target-property="actualThickness">
                    <span class="entry-label">材料实际厚度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="gaugeCode">
                    <span class="entry-label">标距代码</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="yieldStrength">
                    <span class="entry-label">屈服强度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="tensileStrength">
                    <span class="entry-label">抗拉强度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="yieldRatio">
                    <span class="entry-label">屈强比</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingAngle">
                    <span class="entry-label">弯曲角度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingDiameter">
                    <span class="entry-label">弯曲直径</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="tensileDirection">
                    <span class="entry-label">拉伸试验方向</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
            </div>
        </div>

		<!-- 质保书条目 7 -->
		<div class="warranty-item" data-target-item>
            <div class="warranty-info">
                <div class="id" data-target-field="idText"></div>
                <div class="date" data-target-field="dateText"></div>
            </div>
            <div class="dropdown-arrow">
                <span class="arrow-char">∨</span>
            </div>
        </div>
        <div class="warranty-details" data-target-details>
            <p>生产厂家: <span data-target-value-for-p="manufacturer"></span></p>
            <p>产品名称: <span data-target-value-for-p="productName"></span></p>
            <p>生产日期: <span data-target-value-for-p="productionDate"></span></p>
            <p>炉号: <span data-target-value-for-p="furnaceNo"></span></p>
            <p>钢种: <span data-target-value-for-p="steelGrade"></span></p>
            <p>规格: <span data-target-value-for-p="specification"></span></p>
            <p>重量: <span data-target-value-for-p="weight"></span></p>
            <p>捆号 (卷号): <span data-target-value-for-p="bundleNo"></span></p>

            <div class="section-title">成分信息</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">成分</span>
                    <span class="entry-value">结果, %</span>
                    <span class="entry-status">判定</span>
                </div>
            </div>
            <div class="section-title">物理特性</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">项目</span>
                    <span class="entry-value">结果</span>
                    <span class="entry-status">判定</span>
                </div>
                <div class="detail-entry" data-target-property="gaugeCode">
                    <span class="entry-label">标距代码</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="yieldStrength">
                    <span class="entry-label">屈服强度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="tensileStrength">
                    <span class="entry-label">抗拉强度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="yieldRatio">
                    <span class="entry-label">屈强比</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingAngle">
                    <span class="entry-label">弯曲角度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingDiameter">
                    <span class="entry-label">弯曲直径</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="tensileDirection">
                    <span class="entry-label">拉伸试验方向</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
            </div>
        </div>

		<!-- 质保书条目 8 -->
		<div class="warranty-item" data-target-item>
            <div class="warranty-info">
                <div class="id" data-target-field="idText"></div>
                <div class="date" data-target-field="dateText"></div>
            </div>
            <div class="dropdown-arrow">
                <span class="arrow-char">∨</span>
            </div>
        </div>
        <div class="warranty-details" data-target-details>
            <p>生产厂家: <span data-target-value-for-p="manufacturer"></span></p>
            <p>产品名称: <span data-target-value-for-p="productName"></span></p>
            <p>生产日期: <span data-target-value-for-p="productionDate"></span></p>
            <p>炉号: <span data-target-value-for-p="furnaceNo"></span></p>
            <p>钢种: <span data-target-value-for-p="steelGrade"></span></p>
            <p>规格: <span data-target-value-for-p="specification"></span></p>
            <p>重量: <span data-target-value-for-p="weight"></span></p>
            <p>捆号 (卷号): <span data-target-value-for-p="bundleNo"></span></p>

            <div class="section-title">成分信息</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">成分</span>
                    <span class="entry-value">结果, %</span>
                    <span class="entry-status">判定</span>
                </div>
            </div>
            <div class="section-title">物理特性</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">项目</span>
                    <span class="entry-value">结果</span>
                    <span class="entry-status">判定</span>
                </div>
                <div class="detail-entry" data-target-property="gaugeCode">
                    <span class="entry-label">标距代码</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingAngle">
                    <span class="entry-label">弯曲角度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingDiameter">
                    <span class="entry-label">弯曲直径</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="tensileDirection">
                    <span class="entry-label">拉伸试验方向</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
            </div>
        </div>
		<!-- 质保书条目 9 -->
		<div class="warranty-item" data-target-item>
            <div class="warranty-info">
                <div class="id" data-target-field="idText"></div>
                <div class="date" data-target-field="dateText"></div>
            </div>
            <div class="dropdown-arrow">
                <span class="arrow-char">∨</span>
            </div>
        </div>
        <div class="warranty-details" data-target-details>
            <p>生产厂家: <span data-target-value-for-p="manufacturer"></span></p>
            <p>产品名称: <span data-target-value-for-p="productName"></span></p>
            <p>生产日期: <span data-target-value-for-p="productionDate"></span></p>
            <p>炉号: <span data-target-value-for-p="furnaceNo"></span></p>
            <p>钢种: <span data-target-value-for-p="steelGrade"></span></p>
            <p>规格: <span data-target-value-for-p="specification"></span></p>
            <p>重量: <span data-target-value-for-p="weight"></span></p>
            <p>捆号 (卷号): <span data-target-value-for-p="bundleNo"></span></p>

            <div class="section-title">成分信息</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">成分</span>
                    <span class="entry-value">结果, %</span>
                    <span class="entry-status">判定</span>
                </div>
            </div>
            <div class="section-title">物理特性</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">项目</span>
                    <span class="entry-value">结果</span>
                    <span class="entry-status">判定</span>
                </div>
                <div class="detail-entry" data-target-property="gaugeCode">
                    <span class="entry-label">标距代码</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingAngle">
                    <span class="entry-label">弯曲角度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingDiameter">
                    <span class="entry-label">弯曲直径</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="tensileDirection">
                    <span class="entry-label">拉伸试验方向</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
            </div>
        </div>
		<!-- 质保书条目 10 -->
		<div class="warranty-item" data-target-item>
            <div class="warranty-info">
                <div class="id" data-target-field="idText"></div>
                <div class="date" data-target-field="dateText"></div>
            </div>
            <div class="dropdown-arrow">
                <span class="arrow-char">∨</span>
            </div>
        </div>
        <div class="warranty-details" data-target-details>
            <p>生产厂家: <span data-target-value-for-p="manufacturer"></span></p>
            <p>产品名称: <span data-target-value-for-p="productName"></span></p>
            <p>生产日期: <span data-target-value-for-p="productionDate"></span></p>
            <p>炉号: <span data-target-value-for-p="furnaceNo"></span></p>
            <p>钢种: <span data-target-value-for-p="steelGrade"></span></p>
            <p>规格: <span data-target-value-for-p="specification"></span></p>
            <p>重量: <span data-target-value-for-p="weight"></span></p>
            <p>捆号 (卷号): <span data-target-value-for-p="bundleNo"></span></p>

            <div class="section-title">成分信息</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">成分</span>
                    <span class="entry-value">结果, %</span>
                    <span class="entry-status">判定</span>
                </div>
            </div>
            <div class="section-title">物理特性</div>
            <hr class="title-divider">
            <div class="details-list">
                <div class="detail-entry detail-header">
                    <span class="entry-label">项目</span>
                    <span class="entry-value">结果</span>
                    <span class="entry-status">判定</span>
                </div>
                <div class="detail-entry" data-target-property="gaugeCode">
                    <span class="entry-label">标距代码</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingAngle">
                    <span class="entry-label">弯曲角度</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="bendingDiameter">
                    <span class="entry-label">弯曲直径</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
                <div class="detail-entry" data-target-property="tensileDirection">
                    <span class="entry-label">拉伸试验方向</span>
                    <span class="entry-value" data-target-value></span>
                    <span class="entry-status" data-target-status></span>
                </div>
            </div>
        </div>

        <!-- 证书图片直接显示 -->
        <div class="warranty-details expanded full-width-image-area">
            <div class="certificate-image-container">
                 <img src="../pdf/材质单示例.png" alt="产品质量证明书"> <!-- 默认图片 -->
            </div>
        </div>


        <!-- 联系方式区域 (独立于可折叠条目) -->
        <div class="contact-section">
            <div class="title">联系方式</div>
            <p class="phone-line">销售电话: 建材0421-6838215、特钢0421-6838924</p>
            <p class="phone-line">宽带0421-6838211</p>
            <p>服务热线: 400-0421-555</p>
        </div>

    </div> <!-- 这是 .container 的结束标签 -->

    <!-- 灯箱的 HTML 结构 (已移除关闭按钮) -->
    <div id="imageLightbox" class="lightbox-overlay" style="display: none;">
        <img id="lightboxImage" src="" alt="证书放大图">
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- START: Splash Screen Elements ---
            const splashScreen = document.getElementById('splash-screen');
            const splashImage = document.getElementById('splash-image');
            const mainContainer = document.querySelector('.container');
            const contactSection = document.querySelector('.contact-section');
            // --- END: Splash Screen Elements ---

            // --- START: Dynamically set certificate image based on URL parameter ---
            const certificateImageElement = document.querySelector('.full-width-image-area .certificate-image-container img');
            const defaultImageSrc = certificateImageElement ? certificateImageElement.src : '../pdf/001.png';
            const defaultImageAlt = certificateImageElement ? certificateImageElement.alt : '产品质量证明书';

            let finalCertificateSrc = defaultImageSrc;
            let finalCertificateAlt = defaultImageAlt;

            function showSplashAndProceed() {
                if (splashImage) {
                    splashImage.src = finalCertificateSrc;
                    splashImage.alt = finalCertificateAlt;
                }

                setTimeout(() => {
                    if (splashScreen) splashScreen.style.display = 'none';
                    if (mainContainer) mainContainer.style.display = 'block';
                    if (contactSection) contactSection.style.display = 'block';
                    document.body.style.overflow = 'auto';
                }, 5000); // 5 seconds
            }
            document.body.style.overflow = 'hidden'; // Prevent body scroll during splash

            if (certificateImageElement) {
                try {
                    const urlParams = new URLSearchParams(window.location.search);
                    const pdfParamValue = urlParams.get('pdf');

                    if (pdfParamValue) {
                        if (pdfParamValue.includes('.') && pdfParamValue.lastIndexOf('.') < pdfParamValue.length - 1) {
                            let explicitFileName = pdfParamValue.replace(/[^\w\-\.]/g, '');
                            if (explicitFileName) {
                                const potentialSrc = `../pdf/${explicitFileName}`;
                                // Test load this image before setting it everywhere
                                const testImg = new Image();
                                testImg.onload = function() {
                                    certificateImageElement.src = potentialSrc;
                                    const baseName = explicitFileName.substring(0, explicitFileName.lastIndexOf('.'));
                                    certificateImageElement.alt = `产品质量证明书 ${baseName}`;
                                    finalCertificateSrc = potentialSrc;
                                    finalCertificateAlt = certificateImageElement.alt;
                                    showSplashAndProceed();
                                };
                                testImg.onerror = function() {
                                    console.error(`Error loading explicitly specified image: ${potentialSrc}. Reverting to default.`);
                                    certificateImageElement.src = defaultImageSrc; // Keep main image default if explicit fails
                                    certificateImageElement.alt = defaultImageAlt;
                                    // finalCertificateSrc and finalCertificateAlt are already default
                                    showSplashAndProceed(); // Proceed with default for splash
                                };
                                testImg.src = potentialSrc; // Start loading test image
                            } else {
                                console.warn('Invalid "pdf" parameter (with extension) after sanitization:', pdfParamValue);
                                showSplashAndProceed(); // Use default
                            }
                        } else {
                            let baseFileName = pdfParamValue.replace(/[^\w\-]/g, '');
                            if (baseFileName) {
                                const extensionsToTry = ['png', 'jpg', 'jpeg', 'gif', 'webp'];
                                let foundImage = false;

                                function tryLoadNextExtension(index) {
                                    if (index >= extensionsToTry.length) {
                                        if (!foundImage) {
                                            console.warn(`Image not found for base name "${baseFileName}" with any attempted extension. Reverting to default.`);
                                            // certificateImageElement already shows default or its original src
                                            // finalCertificateSrc and finalCertificateAlt are already default
                                        }
                                        showSplashAndProceed();
                                        return;
                                    }

                                    const currentExtension = extensionsToTry[index];
                                    const potentialSrc = `../pdf/${baseFileName}.${currentExtension}`;
                                    const testImage = new Image();
                                    testImage.onload = function() {
                                        console.log(`Successfully found: ${potentialSrc}`);
                                        certificateImageElement.src = potentialSrc;
                                        certificateImageElement.alt = `产品质量证明书 ${baseFileName}`;
                                        finalCertificateSrc = potentialSrc;
                                        finalCertificateAlt = certificateImageElement.alt;
                                        foundImage = true;
                                        tryLoadNextExtension(extensionsToTry.length); // Force exit loop and proceed
                                    };
                                    testImage.onerror = function() {
                                        console.log(`Failed to load: ${potentialSrc}. Trying next extension...`);
                                        tryLoadNextExtension(index + 1);
                                    };
                                    testImage.src = potentialSrc;
                                }
                                tryLoadNextExtension(0);
                            } else {
                                console.warn('Invalid "pdf" parameter (no extension) after sanitization:', pdfParamValue);
                                showSplashAndProceed(); // Use default
                            }
                        }
                    } else {
                        // No 'pdf' parameter, main image uses default, splash uses default
                        showSplashAndProceed();
                    }
                } catch (e) {
                    console.error("Error processing URL parameters for PDF image:", e);
                    // Keep main image default, splash uses default
                    showSplashAndProceed();
                }
            } else {
                console.error('Certificate image element not found for dynamic update. Splash will use default.');
                showSplashAndProceed(); // Use default for splash
            }
            // --- END: Dynamically set certificate image ---


            // --- Data filling logic ---
            const sourceItemTemplate = document.querySelector('[data-source-item-template]');
            const sourceDetailsTemplate = document.querySelector('[data-source-details-template]');

            if (!sourceItemTemplate || !sourceDetailsTemplate) {
                console.error('Source template elements not found!');
            } else {
                const sourceData = {
                    idText: sourceItemTemplate.querySelector('[data-source-field="idText"]')?.textContent || '',
                    dateText: sourceItemTemplate.querySelector('[data-source-field="dateText"]')?.textContent || '',
                    pValues: {},
                    components: {},
                    properties: {}
                };

                sourceDetailsTemplate.querySelectorAll('[data-source-p]').forEach(pElement => {
                    const key = pElement.dataset.sourceP;
                    const textContent = pElement.textContent || '';
                    const value = textContent.substring(textContent.indexOf(':') + 1).trim();
                    if (key) sourceData.pValues[key] = value;
                });

                sourceDetailsTemplate.querySelectorAll('[data-source-component]').forEach(compElement => {
                    const key = compElement.dataset.sourceComponent;
                    const valueElement = compElement.querySelector('[data-source-value]');
                    const statusElement = compElement.querySelector('[data-source-status]');
                    if (key && valueElement && statusElement) {
                        sourceData.components[key] = {
                            value: valueElement.textContent || '',
                            status: statusElement.textContent || ''
                        };
                    }
                });

                const propertiesToCopyFromSource = [
                    'actualThickness', 'gaugeCode', 'yieldStrength', 'tensileStrength',
                    'yieldRatio', 'bendingAngle', 'bendingDiameter', 'tensileDirection'
                ];
                propertiesToCopyFromSource.forEach(propKey => {
                     const propElement = sourceDetailsTemplate.querySelector(`[data-source-property="${propKey}"]`);
                     const valueElement = propElement?.querySelector('[data-source-value]');
                     const statusElement = propElement?.querySelector('[data-source-status]');
                     if (propElement && valueElement && statusElement){
                        sourceData.properties[propKey] = {
                            value: valueElement.textContent || '',
                            status: statusElement.textContent || ''
                        };
                     }
                });

                const targetItems = document.querySelectorAll('[data-target-item]');
                targetItems.forEach(targetItem => {
                    const targetDetails = targetItem.nextElementSibling;
                    if (!targetDetails || !targetDetails.hasAttribute('data-target-details')) return;

                    const targetIdField = targetItem.querySelector('[data-target-field="idText"]');
                    if (targetIdField) targetIdField.textContent = sourceData.idText;
                    const targetDateField = targetItem.querySelector('[data-target-field="dateText"]');
                    if (targetDateField) targetDateField.textContent = sourceData.dateText;

                    for (const key in sourceData.pValues) {
                        const targetPValueSpan = targetDetails.querySelector(`[data-target-value-for-p="${key}"]`);
                        if (targetPValueSpan) targetPValueSpan.textContent = sourceData.pValues[key];
                    }

                    for (const key in sourceData.properties) {
                         const targetPropEntry = targetDetails.querySelector(`[data-target-property="${key}"]`);
                         if (targetPropEntry) {
                             const targetValueSpan = targetPropEntry.querySelector('[data-target-value]');
                             const targetStatusSpan = targetPropEntry.querySelector('[data-target-status]');
                             if (targetValueSpan && sourceData.properties[key]?.value !== undefined) targetValueSpan.textContent = sourceData.properties[key].value;
                             if (targetStatusSpan && sourceData.properties[key]?.status !== undefined) targetStatusSpan.textContent = sourceData.properties[key].status;
                         }
                    }

                    if (targetDetails.dataset.itemIndex === '6') {
                        for (const key in sourceData.components) {
                            const targetCompEntry = targetDetails.querySelector(`[data-target-component="${key}"]`);
                            if (targetCompEntry) {

                                const targetValueSpan = targetCompEntry.querySelector('[data-target-value]');
                                const targetStatusSpan = targetCompEntry.querySelector('[data-target-status]');
                                if (targetValueSpan && sourceData.components[key]?.value !== undefined) targetValueSpan.textContent = sourceData.components[key].value;
                                if (targetStatusSpan && sourceData.components[key]?.status !== undefined) targetStatusSpan.textContent = sourceData.components[key].status;
                            }
                        }
                    }
                });
            }


            // --- 折叠/展开逻辑 ---
            const warrantyItems = document.querySelectorAll('.warranty-item');
            warrantyItems.forEach(item => {
                item.addEventListener('click', function() {
                    const currentDetails = this.nextElementSibling;
                    const isActive = this.classList.contains('active');
                    document.querySelectorAll('.warranty-item').forEach(otherItem => {
                        if (otherItem !== this) {
                            otherItem.classList.remove('active');
                            const otherDetails = otherItem.nextElementSibling;
                            if (otherDetails && otherDetails.classList.contains('warranty-details') && !otherDetails.classList.contains('full-width-image-area')) {
                                otherDetails.classList.remove('expanded');
                            }
                        }
                    });
                    if (currentDetails && currentDetails.classList.contains('warranty-details') && !currentDetails.classList.contains('full-width-image-area')) {
                        if (isActive) {
                            this.classList.remove('active');
                            currentDetails.classList.remove('expanded');
                        } else {
                            this.classList.add('active');
                            currentDetails.classList.add('expanded');
                        }
                    }
                });
            });

            // --- 灯箱逻辑 ---
            const originalCertificateImage = certificateImageElement;
            const lightbox = document.getElementById('imageLightbox');
            const lightboxImg = document.getElementById('lightboxImage');

            let lightboxZoomState = 0;
            let clickTimer = null;

            if (originalCertificateImage && lightbox && lightboxImg) {
                originalCertificateImage.addEventListener('click', function() {
                    if (splashScreen && splashScreen.style.display !== 'none') return; // Don't open lightbox if splash is visible
                    openLightbox(this.src);
                });

                function openLightbox(src) {
                    lightboxImg.src = src;
                    lightboxZoomState = 1;
                    lightboxImg.classList.remove('lightbox-image-zoomed');
                    lightbox.classList.remove('is-scrollable');
                    lightbox.style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                }

                function closeLightbox() {
                    lightbox.style.display = 'none';
                    lightboxImg.src = '';
                    lightboxZoomState = 0;
                    if (splashScreen && splashScreen.style.display === 'none') { // Only restore scroll if splash is also done
                        document.body.style.overflow = 'auto';
                    }
                    lightboxImg.classList.remove('lightbox-image-zoomed');
                    lightbox.classList.remove('is-scrollable');
                }

                lightbox.addEventListener('click', function(event) {
                    if (event.target === lightbox) {
                        closeLightbox();
                    }
                });

                lightboxImg.addEventListener('click', function(event) {
                    event.stopPropagation();

                    if (clickTimer) {
                        clearTimeout(clickTimer);
                        clickTimer = null;
                        handleDoubleClick();
                    } else {
                        clickTimer = setTimeout(() => {
                            clickTimer = null;
                            handleSingleClick();
                        }, 250);
                    }
                });

                function handleSingleClick() {
                    closeLightbox();
                }

                function handleDoubleClick() {
                    if (lightboxZoomState === 1) {
                        lightboxImg.classList.add('lightbox-image-zoomed');
                        lightbox.classList.add('is-scrollable');
                        lightboxZoomState = 2;
                    } else if (lightboxZoomState === 2) {
                        lightboxImg.classList.remove('lightbox-image-zoomed');
                        lightbox.classList.remove('is-scrollable');
                        lightboxZoomState = 1;
                    }
                }

                document.addEventListener('keydown', function(event) {
                    if (event.key === 'Escape' && lightboxZoomState !== 0) {
                        closeLightbox();
                    }
                });

            } else {
                if (!originalCertificateImage) console.error('Original certificate image (for lightbox) not found!');
                if (!lightbox) console.error('Lightbox overlay element not found!');
                if (!lightboxImg) console.error('Lightbox image element not found!');
            }
        });
    </script>

</body>
</html>